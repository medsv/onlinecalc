import streamlit as st
from common.print_result import print_result
from libs.wsprops.region1 import Region1
st.set_page_config(
    page_title="–†–∞—Å—á—ë—Ç —Å–≤–æ–π—Å—Ç–≤ –≤–æ–¥—ã",
    page_icon="üíª",
    layout="centered"
)
st.title("–†–∞—Å—á—ë—Ç —Å–≤–æ–π—Å—Ç–≤ –≤–æ–¥—ã")
st.markdown("–î–æ–ø—É—Å–∫–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤–µ–ª–∏—á–∏–Ω: t = [0; 350] ¬∞–°,  p = [611,213 –ü–∞; 100 –ú–ü–∞]")
t: float = st.number_input("–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, ¬∞–°", value=20., step=1., min_value=0., max_value= 350., key ="t", width = 200)
p: float = st.number_input("–ê–±—Å–æ–ª—é—Ç–Ω–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ, –ü–∞", value=101325.0, step=1., min_value=611.213, max_value=100e6, key ="p", width = 200)
water = Region1()
if st.button("–†–∞—Å—Å—á–∏—Ç–∞—Ç—å"):
    if not water.Tp_in(t + 273.15, p):
        t_cor = water.sc.t_p(p)
        p_cor = water.sc.p_t(t)
        mes = f"–°–æ—á–µ—Ç–∞–Ω–∏–µ –≤–≤–µ–¥—ë–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –∏ –¥–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–∞—Ä—É. –î–ª—è –≤–æ–¥—ã –ª–∏–±–æ –¥–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤—ã—à–µ {p_cor} –ü–∞, –ª–∏–±–æ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–∏–∂–µ {t_cor} ¬∞–°."
        st.error(mes, icon="‚ö†Ô∏è")
    else:
        try:
            props = water.props_tp(t,p)
            ps: float = water.sc.p_t(t)
            ts: float = water.sc.t_p(p)
            data = {"–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤–æ–¥—ã, ¬∞–°": t, "–î–∞–≤–ª–µ–Ω–∏–µ –≤–æ–¥—ã, –ü–∞": p, "–ü–ª–æ—Ç–Ω–æ—Å—Ç—å –≤–æ–¥—ã, –∫–≥/–º3": 1. / props['v'], "–£–¥–µ–ª—å–Ω–∞—è —ç–Ω—Ç–∞–ª—å–ø–∏—è, –î–∂/–∫–≥": props['h'], 
                    "–£–¥–µ–ª—å–Ω–∞—è —ç–Ω—Ç—Ä–æ–ø–∏—è, –î–∂/–∫–≥/–ö": props['s'], "–£–¥–µ–ª—å–Ω–∞—è —Ç–µ–ø–ª–æ—ë–º–∫–æ—Å—Ç—å –ø—Ä–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–º –¥–∞–≤–ª–µ–Ω–∏–∏, –î–∂/–∫–≥/–ö": props['cp'],
                    "–£–¥–µ–ª—å–Ω–∞—è —Ç–µ–ø–ª–æ—ë–º–∫–æ—Å—Ç—å –ø—Ä–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–º –æ–±—ä—ë–º–µ, –î–∂/–∫–≥/–ö": props['cv'], "–£–¥–µ–ª—å–Ω—ã–π –æ–±—ä—ë–º –≤–æ–¥—ã, –º3/–∫–≥": props['v'], 
                    "–£–¥–µ–ª—å–Ω–∞—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —ç–Ω–µ—Ä–≥–∏—è, –î–∂/–∫–≥": props['u'], "–°–∫–æ—Ä–æ—Å—Ç—å –∑–≤—É–∫–∞, –º/—Å": props['w'], "–î–∞–≤–ª–µ–Ω–∏–µ –∫–∏–ø–µ–Ω–∏—è –≤–æ–¥—ã, –ü–∞": ps, 
                    "–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∫–∏–ø–µ–Ω–∏—è –≤–æ–¥—ã, ¬∞–°": ts}
            print_result(data)

        except Exception as e:
            st.error(f"{str(e)}", icon="‚ö†Ô∏è")

with st.expander("–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ"):
    st.markdown("[–°—Ç–∞—Ç—å—è](https://dzen.ru/a/X0qh9a5aWlqL4uAF) –†–∞—Å—á—ë—Ç —Ç–µ–ø–ª–æ—Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö —Å–≤–æ–π—Å—Ç–≤ –≤–æ–¥—ã")
